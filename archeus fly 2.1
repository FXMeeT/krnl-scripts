-- Gui to Lua (Fixed Version)
-- Version: 3.2

-- Instances:
local main = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local up = Instance.new("TextButton")
local down = Instance.new("TextButton")
local onof = Instance.new("TextButton")
local TextLabel = Instance.new("TextLabel")
local plus = Instance.new("TextButton")
local speed = Instance.new("TextLabel")
local mine = Instance.new("TextButton")

-- State:
local speeds = 1
local nowe = false
local tpwalking = false

-- Setup:
main.Name = "main"
main.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
main.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = main
Frame.BackgroundColor3 = Color3.fromRGB(163, 255, 137)
Frame.BorderColor3 = Color3.fromRGB(103, 221, 213)
Frame.Position = UDim2.new(0.100320168, 0, 0.379746825, 0)
Frame.Size = UDim2.new(0, 190, 0, 57)
Frame.Active = true
Frame.Draggable = true

-- Buttons setup:
local function setupButton(btn, parent, name, text, pos, size, color)
    btn.Name = name
    btn.Parent = parent
    btn.BackgroundColor3 = color
    if pos then btn.Position = pos end
    btn.Size = size
    btn.Font = Enum.Font.SourceSans
    btn.Text = text
    btn.TextColor3 = Color3.new(0, 0, 0)
    btn.TextScaled = true
    btn.TextWrapped = true
end

setupButton(up, Frame, "up", "UP", nil, UDim2.new(0, 44, 0, 28), Color3.fromRGB(79, 255, 152))
setupButton(down, Frame, "down", "DOWN", UDim2.new(0, 0, 0.491, 0), UDim2.new(0, 44, 0, 28), Color3.fromRGB(215, 255, 121))
setupButton(onof, Frame, "onof", "fly", UDim2.new(0.703, 0, 0.491, 0), UDim2.new(0, 56, 0, 28), Color3.fromRGB(255, 249, 74))
setupButton(plus, Frame, "plus", "+", UDim2.new(0.232, 0, 0, 0), UDim2.new(0, 45, 0, 28), Color3.fromRGB(133, 145, 255))
setupButton(mine, Frame, "mine", "-", UDim2.new(0.232, 0, 0.491, 0), UDim2.new(0, 45, 0, 29), Color3.fromRGB(123, 255, 247))

-- Label setup:
TextLabel.Parent = Frame
TextLabel.BackgroundColor3 = Color3.fromRGB(242, 60, 255)
TextLabel.Position = UDim2.new(0.469, 0, 0, 0)
TextLabel.Size = UDim2.new(0, 100, 0, 28)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "gui by me_ozoneYT"
TextLabel.TextColor3 = Color3.new(0, 0, 0)
TextLabel.TextScaled = true
TextLabel.TextWrapped = true

-- Speed label:
speed.Name = "speed"
speed.Parent = Frame
speed.BackgroundColor3 = Color3.fromRGB(255, 85, 0)
speed.Position = UDim2.new(0.468, 0, 0.491, 0)
speed.Size = UDim2.new(0, 44, 0, 28)
speed.Font = Enum.Font.SourceSans
speed.Text = tostring(speeds)
speed.TextColor3 = Color3.new(0, 0, 0)
speed.TextScaled = true
speed.TextWrapped = true

-- Notification:
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "GO SUB TO HIM",
    Text = "fly gui by me_ozoneYT",
    Icon = "rbxthumb://type=Asset&id=5107182114&w=150&h=150",
    Duration = 16
})

-- Helper to get humanoid:
local function getHumanoid()
    local char = game.Players.LocalPlayer.Character
    return char and char:FindFirstChildWhichIsA("Humanoid")
end

-- Fly control toggled (placeholder):
onof.MouseButton1Click:Connect(function()
    nowe = not nowe
    -- Replace with your flight toggle logic
    print("Fly mode:", nowe and "ENABLED" or "DISABLED")
end)

-- Vertical motion:
up.MouseButton1Click:Connect(function()
    local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = hrp.CFrame * CFrame.new(0, 2, 0)
    end
end)

down.MouseButton1Click:Connect(function()
    local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = hrp.CFrame * CFrame.new(0, -2, 0)
    end
end)

-- Adjust speed:
plus.MouseButton1Click:Connect(function()
    speeds += 1
    speed.Text = tostring(speeds)
end)

mine.MouseButton1Click:Connect(function()
    if speeds > 1 then
        speeds -= 1
        speed.Text = tostring(speeds)
    else
        speed.Text = "can't be < 1"
        task.wait(1)
        speed.Text = tostring(speeds)
    end
end)

-- Reset animations if respawn:
game.Players.LocalPlayer.CharacterAdded:Connect(function()
    task.wait(0.7)
    local char = game.Players.LocalPlayer.Character
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.PlatformStand = false
    end
    local anim = char:FindFirstChild("Animate")
    if anim then anim.Disabled = false end
end)
